{"version":3,"sources":["webpack://react-admin/./src/pages/login/style.less?354f","pages/login/style.less","../node_modules/css-loader/dist/runtime/getUrl.js","pages/login/login-bg.jpg","../node_modules/@ant-design/icons-svg/es/asn/LockOutlined.js","../node_modules/@ant-design/icons/es/icons/LockOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/FileImageOutlined.js","../node_modules/@ant-design/icons/es/icons/FileImageOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/MessageOutlined.js","../node_modules/@ant-design/icons/es/icons/MessageOutlined.js","pages/login/index.jsx"],"names":["api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","url","test","slice","hash","needQuotes","concat","replace","LockOutlined","props","ref","React","AntdIcon","Object","assign","icon","LockOutlinedSvg","displayName","FileImageOutlined","FileImageOutlinedSvg","MessageOutlined","MessageOutlinedSvg","config","path","auth","header","side","pageHeader","tab","login","usePost","useState","message","setMessage","isMount","setIsMount","imageCodeRef","useRef","useForm","form","testImages","a","index","Math","floor","random","length","useEffect","setFieldsValue","userName","password","imageCode","messageCode","setTimeout","formItemClass","classNames","styles","formItem","active","className","root","Helmet","title","logo","box","name","onFinish","values","loading","params","run","errorTip","then","res","id","token","others","setLoginUser","toHome","catch","err","response","data","current","refresh","allowClear","autoFocus","prefix","UserOutlined","placeholder","required","type","src","rules","validator","rule","value","Array","isArray","Promise","reject","resolve","onSend","buttonType","noStyle","shouldUpdate","style","marginBottom","submitBtn","htmlType","disabled","isFieldsTouched","getFieldsError","filter","errors"],"mappings":"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","file":"static/js/10.0b29fa1f.chunk.js","sourcesContent":["var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-10-1!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-10-2!./style.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./login-bg.jpg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".root_27x2_ {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin: 0;\\n  height: 100vh;\\n  background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n  background-size: cover;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n}\\n.logo_215K2 {\\n  position: absolute;\\n  top: 16px;\\n  left: 16px;\\n}\\n.box_3GeED {\\n  padding: 16px 40px;\\n  width: 350px;\\n  border-radius: 0;\\n  z-index: 100;\\n}\\n.box_3GeED .header_1IDbf {\\n  font-size: 25px;\\n  text-align: center;\\n  color: #fff;\\n  font-weight: bolder;\\n}\\n.box_3GeED .submitBtn_2uMDZ {\\n  width: 100%;\\n}\\n.box_3GeED .errorTip_3n82Q {\\n  height: 30px;\\n  line-height: 30px;\\n  text-align: center;\\n  color: red;\\n}\\n.box_3GeED .formItem_tHdOe {\\n  transition-delay: 5s;\\n  transition: 500ms;\\n  transform: translateX(100%);\\n  margin-bottom: 24px;\\n}\\n.box_3GeED .formItem_tHdOe:nth-child(2n) {\\n  transform: translateX(-100%);\\n}\\n.box_3GeED .formItem_tHdOe.active_h8omp {\\n  transform: translateX(0);\\n}\\n.box_3GeED .ant-react-admin-input {\\n  height: 34px;\\n}\\n.box_3GeED .ant-react-admin-btn {\\n  height: 44px;\\n}\\n.box_3GeED .ant-react-admin-form-item-explain {\\n  position: absolute !important;\\n  bottom: -24px !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/pages/login/style.less\"],\"names\":[],\"mappings\":\"AAEA;EACI,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,SAAA;EACA,aAAA;EACA,yDAAA;EACA,sBAAA;EACA,2BAAA;EACA,4BAAA;AAGJ;AAAA;EACI,kBAAA;EACA,SAAA;EACA,UAAA;AAEJ;AACA;EACI,kBAAA;EACA,YAAA;EAEA,gBAAA;EAEA,YAAA;AADJ;AALA;EASQ,eAAA;EACA,kBAAA;EACA,WAAA;EACA,mBAAA;AADR;AAXA;EAgBQ,WAAA;AAFR;AAdA;EAoBQ,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,UAAA;AAHR;AApBA;EA2BQ,oBAAA;EACA,iBAAA;EACA,2BAAA;EACA,mBAAA;AAJR;AAMQ;EACI,4BAAA;AAJZ;AAOQ;EACI,wBAAA;AALZ;AAhCA;EA2CY,YAAA;AARZ;AAnCA;EA+CY,YAAA;AATZ;AAtCA;EAmDY,6BAAA;EACA,wBAAA;AAVZ\",\"sourcesContent\":[\"@import \\\"src/theme\\\";\\n\\n.root {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    margin: 0;\\n    height: 100vh;\\n    background-image: url(\\\"./login-bg.jpg\\\");\\n    background-size: cover;\\n    background-position: center;\\n    background-repeat: no-repeat;\\n}\\n\\n.logo {\\n    position: absolute;\\n    top: 16px;\\n    left: 16px;\\n}\\n\\n.box {\\n    padding: 16px 40px;\\n    width: 350px;\\n\\n    border-radius: 0;\\n    // background: #f8f8f9;\\n    z-index: 100;\\n\\n    .header {\\n        font-size: 25px;\\n        text-align: center;\\n        color: #fff;\\n        font-weight: bolder;\\n    }\\n\\n    .submitBtn {\\n        width: 100%;\\n    }\\n\\n    .errorTip {\\n        height: 30px;\\n        line-height: 30px;\\n        text-align: center;\\n        color: red;\\n    }\\n\\n    .formItem {\\n        transition-delay: 5s;\\n        transition: 500ms;\\n        transform: translateX(100%);\\n        margin-bottom: 24px;\\n\\n        &:nth-child(2n) {\\n            transform: translateX(-100%);\\n        }\\n\\n        &.active {\\n            transform: translateX(0);\\n        }\\n    }\\n\\n    :global {\\n        .@{ant-prefix}-input {\\n            height: 34px;\\n        }\\n\\n        .@{ant-prefix}-btn {\\n            height: 44px;\\n        }\\n\\n        .@{ant-prefix}-form-item-explain {\\n            position: absolute !important;\\n            bottom: -24px !important;\\n        }\\n    }\\n}\\n\\n@packageName: react-admin;\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"antPrefix\": \"ant-react-admin\",\n\t\"raLibPrefix\": \"ra-lib-react-admin\",\n\t\"root\": \"root_27x2_\",\n\t\"logo\": \"logo_215K2\",\n\t\"box\": \"box_3GeED\",\n\t\"header\": \"header_1IDbf\",\n\t\"submitBtn\": \"submitBtn_2uMDZ\",\n\t\"errorTip\": \"errorTip_3n82Q\",\n\t\"formItem\": \"formItem_tHdOe\",\n\t\"active\": \"active_h8omp\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","export default __webpack_public_path__ + \"static/media/login-bg.3ab1656e.jpg\";","// This icon file is generated automatically.\nvar LockOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z\" } }] }, \"name\": \"lock\", \"theme\": \"outlined\" };\nexport default LockOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LockOutlinedSvg from \"@ant-design/icons-svg/es/asn/LockOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LockOutlined = function LockOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LockOutlinedSvg\n  }));\n};\n\nLockOutlined.displayName = 'LockOutlined';\nexport default /*#__PURE__*/React.forwardRef(LockOutlined);","// This icon file is generated automatically.\nvar FileImageOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z\" } }] }, \"name\": \"file-image\", \"theme\": \"outlined\" };\nexport default FileImageOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FileImageOutlinedSvg from \"@ant-design/icons-svg/es/asn/FileImageOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileImageOutlined = function FileImageOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: FileImageOutlinedSvg\n  }));\n};\n\nFileImageOutlined.displayName = 'FileImageOutlined';\nexport default /*#__PURE__*/React.forwardRef(FileImageOutlined);","// This icon file is generated automatically.\nvar MessageOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z\" } }] }, \"name\": \"message\", \"theme\": \"outlined\" };\nexport default MessageOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MessageOutlinedSvg from \"@ant-design/icons-svg/es/asn/MessageOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MessageOutlined = function MessageOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: MessageOutlinedSvg\n  }));\n};\n\nMessageOutlined.displayName = 'MessageOutlined';\nexport default /*#__PURE__*/React.forwardRef(MessageOutlined);","import React, {useState, useRef, useEffect} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {Button, Form} from 'antd';\nimport {LockOutlined, UserOutlined, FileImageOutlined, MessageOutlined} from '@ant-design/icons';\nimport {FormItem} from '@ra-lib/components';\nimport {setLoginUser, toHome} from 'src/commons';\nimport config from 'src/commons/config-hoc';\nimport {usePost} from 'src/commons/ajax';\nimport classNames from 'classnames';\nimport {Logo} from 'src/components';\nimport styles from './style.less';\n\nexport default config({\n    path: '/login',\n    auth: false,\n    header: false,\n    side: false,\n    pageHeader: false,\n    tab: false,\n})(function Login() {\n    const login = usePost('/login');\n    const [message, setMessage] = useState();\n    const [isMount, setIsMount] = useState(false);\n    const imageCodeRef = useRef(null);\n    const [form] = Form.useForm();\n\n    // 测试图片验证码\n    const testImages = [\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAIAAADmAupWAAABv0lEQVR42u3ZO04DMRAA0E3BCahScABOgYTEJWg4AhLiHpSkzhWouQDUaYKoOAhYmmBZHnt+zljZrK0ponxW+/ybWWf6XVibTuQ+Pm8ulwXuZh7g/7Z9+5IEcemn2zsccvPq4T3Gx9VPFsWfv+yei+ELLjoJMwCuH7/hRTBjXoqv3XBNm7EnVy2+dWKsghlIwZwKcRi00cyAiemnwuC+wBcMkmAOAWD8KQtmO6IK1mJSlXBVF8EQYCa+QExs2nwAY4xkhA2NAGcY1twEtk1pV3DNPCewcD6nmAAO7BawaJc2pNwjDm+GSc2qNVxLxZM2J3kML4uJGcuQmfhKq6W6smnpQY4Zywss6YLjajG4GJClbbWH+uHBAJaX0Kw5/QKYtWuYKS1Zs5wq1BJs/H62dbfu0o1gM1XeEbCNSdi+YCcqsYezZkewn5ZOWrTZDpYPb08tbRZtWkWP6jHYRjIk51SFl7QoLTkdcciraNVDP1YFs+6Ix1ZjdQDLky02W0pLVdbVggm2IdkS1JM7psXt4n6PY37n0kWGh603uCdjlv88DPAAD/AAD/C5gl836xiLG+EUj7tgEVM6lY81fO7tD3VbH+gso9PWAAAAAElFTkSuQmCC',\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAIAAADmAupWAAAB2ElEQVR42u3Zu00EMRAGYEskZBRBCaQUcBEZBdAACRFC2pgmrguKoAUSCiAjgfDYk8F4x+OZf2zv3nLYmmjPOunbGT/X7f5Zcx3cwY3acHo+xh8ADy/PcSB/endzzUZgI/jh4iMOnPRw9pgGBCZUkJ3Txuw456mcUEE260zNrkArmFUtMRP5PvJawaxqg9mpWuQ5AasvQirjadpvtyc+QLD6LhyuBc1IqcuDNiD3zh+5nGSWyprXAp4gp6S04K0zswRWPa3AsTCu2Jzn+1dshj882DtjoTAzq6uUaXlTJi0Vo4Lv359ytapMV2K5Cm9EZktgJHtyn1FLalWdmZH0gn1UbTMwKwSXovnAgfr2+snvtExgMiBDJZu2HPOB49xWgX/n1agPGbfy3mtuMCnjWGsGsx0ELbgIy5jLq03Zdto/bAxGtMuA2bMR0daCQW0NeNQi+8rcXroKXKytBDfUGsCttDVg6zlJB+fM5CTMahscDBNY8/QqYDYErfXcr95yyOmVz/ojGL3isWpBsH55lgdbbzmIVr/TYi901HFbTGXNXlt2iWUGq2egBZpfkApabvQawMtrDwk+Ju16P7V0cBvtSsHzpfeowIh21z+XdnAHd3AHd/Cq2hc1CxHRUsOCMgAAAABJRU5ErkJggg==',\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAIAAADmAupWAAAB1UlEQVR42u3YPU5DMQwH8I5MiIEZcQwugOAKnIGJmaniEHAddkYGhDgAKwsrpIoURY6f/bed99H2RR5eP6T2Jztxks3fkY3NCj6c8fF0voKHwW8/73iov335+5XD9I9vH0/aEL5/cf1aImnrlyVGBBdkHRGqyvaDg1qWCmpVKqL1ZFgePvDn95VVy37BN3v7gIVirp8TVdUScPflyg/G16oMTlSkpHtpWbC/pE3anFhkDk+jNfdhXFtqGFy0xgPXWhvYpM0Pp/c34BLdgvH2K4CJ1gAGtWRxAsEEZm1IuLYzmKzDtRYH+5pwZ7CqZbtOBCx8CoJZLQRGtO2bSdtxxQLBqlYHy1phO8Gm9+Xhjo2+YEGrgOX9Y6EOMdpQMxxsWmT/bANHGKZ67gVGtDvwEIPNLbIlztp5weYrHraYkd1/EMx6HPVsA7da8KxTa1vw89kWbEuOnlQfgM2XeAQMUrOQLM45EjWFnOrglgNMrwLGE8u2IkKN7LeQHSWiZcC11npMqcEt1TqZ8TMDXs98hq2JJbM3U2e/joXAPmoBT08Ngd3Uol3UhbsEjiR2lhp2a3fg/aU6wftLnQi8HKpDawMvijo6eGnUKTJ8ANoVfARjBR/6+AdF7ZppMTGUVgAAAABJRU5ErkJggg==',\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAIAAADmAupWAAABh0lEQVR42u3YTU7DQAwF4NyAS8AFumTDEgmJW1TiEGWNWHEFbsER2FCp4gpcgiU/qjRyx/Gb58kMCa0jrzKjSl/tSWIPXyd2DQEO8MmCb3brfRR33m4u+LB+5Gx1EK7r7fpehgOckDJ6gzOqi51RNXtwUefVFs1Am8ztwa5/BGiZ+5YW3C+ANb4hmNQyq5ZWr/6CH7Yf/EnupG0Fvvy8SzE/uFprbZC8DOnI8OP7ZpmheXi/CcZJbpJe/q0LsmeVADi984CLWm3TxWnVPH5cUeDzp5d9dAKD1IG3Tkewlv9ENZh5riwFLDMs8Sn5DA8X82xgy2zVs8Rb2Sse3YnvJBJsfmm5wBY+JZ/ph/4f+Or1WYb2M9qlg7UQPJbJk/83X9F5e1hd0nwzZPkBqZh8AB5dOuiWtNkLdh1diR+FkZ3wKMwaeuRgqw0m5S4wSH7zvr87uOITRfIy/PTJjjnTmgKuTi+Y74CTXzQfyZiWwR/tXLpCHoP4AAc4wAEOcIADHOAAB7ju+gYSW9gRrGtiPAAAAABJRU5ErkJggg==',\n    ];\n\n    // 获取图片验证码\n    async function handleFetchImageCode() {\n        const index = Math.floor(Math.random() * (testImages.length + 2));\n        const url = testImages[index];\n        const key = 'xxx';\n        // return url; // value 为 code\n        return [key, url]; // value 为 [key, code]\n    }\n\n    // 发送短信验证码\n    async function handleSendMessage() {\n        // 返回true 或 promise.resolve(true) 则开始倒计时并按钮不可点击 返回其他不倒计时\n        return true;\n    }\n\n    function handleSubmit(values) {\n        if (login.loading) return;\n\n        const params = {\n            ...values,\n        };\n\n        login.run(params, {errorTip: false})\n            .then(res => {\n                const {id, name, token, ...others} = res;\n                setLoginUser({\n                    id,     // 必须字段\n                    name,   // 必须字段\n                    token,\n                    ...others,\n                    // 其他字段按需添加\n                });\n                toHome();\n            })\n            .catch((err) => {\n                setMessage(err.response?.data?.message || '用户名或密码错误');\n                // 可以刷新图片验证码\n                imageCodeRef.current.refresh();\n            });\n    }\n\n    useEffect(() => {\n        // 开发时默认填入数据\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_PREVIEW) {\n            form.setFieldsValue({\n                userName: 'admin',\n                password: '123456',\n                imageCode: '0000',\n                messageCode: '0000',\n            });\n        }\n\n        setTimeout(() => setIsMount(true), 300);\n    }, [form]);\n\n    const formItemClass = classNames(styles.formItem, {[styles.active]: isMount});\n\n    return (\n        <div className={styles.root}>\n            <Helmet title=\"欢迎登录\"/>\n            <div className={styles.logo}>\n                <Logo/>\n            </div>\n            <div className={styles.box}>\n                <Form\n                    form={form}\n                    name=\"login\"\n                    onFinish={handleSubmit}\n                >\n                    <div className={formItemClass}>\n                        <h1 className={styles.header}>欢迎登录</h1>\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            name=\"userName\"\n                            allowClear\n                            autoFocus\n                            prefix={<UserOutlined/>}\n                            placeholder=\"请输入用户名\"\n                            required\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            type=\"password\"\n                            name=\"password\"\n                            prefix={<LockOutlined/>}\n                            placeholder=\"请输入密码\"\n                            required\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            type=\"image-code\"\n                            name=\"imageCode\"\n                            prefix={<FileImageOutlined/>}\n                            placeholder=\"请输入图片验证码\"\n                            src={handleFetchImageCode}\n                            ref={imageCodeRef}\n                            required\n                            rules={[\n                                {\n                                    validator: (rule, value) => {\n                                        if (Array.isArray(value) && !value[1]) return Promise.reject('请输入图片验证码');\n                                        return Promise.resolve();\n                                    },\n                                },\n                            ]}\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            type=\"message-code\"\n                            name=\"messageCode\"\n                            prefix={<MessageOutlined/>}\n                            placeholder=\"请输入短信验证码\"\n                            onSend={handleSendMessage}\n                            buttonType=\"text\"\n                            required\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem noStyle shouldUpdate style={{marginBottom: 0}}>\n                            {() => (\n                                <Button\n                                    className={styles.submitBtn}\n                                    loading={login.loading}\n                                    type=\"primary\"\n                                    htmlType=\"submit\"\n                                    disabled={\n                                        // 用户没有操作过，或者没有setFieldsValue\n                                        !form.isFieldsTouched(true)\n                                        // 表单中存在错误\n                                        || form.getFieldsError().filter(({errors}) => errors.length).length\n                                    }\n                                >\n                                    登录\n                                </Button>\n                            )}\n                        </FormItem>\n                    </div>\n                </Form>\n                <div className={styles.errorTip}>{message}</div>\n            </div>\n        </div>\n    );\n});\n\n"],"sourceRoot":""}