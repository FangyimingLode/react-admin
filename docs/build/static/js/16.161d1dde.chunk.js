(this["webpackJsonpant-admin"]=this["webpackJsonpant-admin"]||[]).push([[16],{538:function(e,n,t){"use strict";t.r(n);t(379);var a=t(67),i=t(26),s=(t(378),t(172)),c=(t(149),t(53)),r=t(44),l=t.n(r),o=(t(105),t(35)),d=t(60),u=(t(555),t(556)),A=t(70),j=t(0),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},x=t(10),p=function(e,n){return j.createElement(x.a,Object.assign({},e,{ref:n,icon:b}))};p.displayName="MinusCircleOutlined";var m=j.forwardRef(p),f=t(377),h=t(102),O=t(543),v=t(775),g=t(23),C=t(590),y=t.n(C),E=t(7);n.default=Object(h.a)({path:"/menus"})((function(e){var n=Object(j.useState)(null),t=Object(A.a)(n,2),r=t[0],b=t[1],x=Object(j.useState)("\u6dfb\u52a0\u9876\u7ea7"),p=Object(A.a)(x,2),h=p[0],C=p[1],k=e.ajax.useGet("/menus"),_=k.data,F=void 0===_?[]:_,w=k.run,I=e.ajax.usePost("/menus").run,R=e.ajax.usePut("/menus").run,H=e.ajax.usePost("/actions").run,M=u.a.useForm(),T=Object(A.a)(M,1)[0],B=u.a.useForm(),J=Object(A.a)(B,1)[0];function N(){return(N=Object(d.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),!n.id){e.next=8;break}return e.next=4,R(n);case 4:return e.next=6,w();case 6:e.next=14;break;case 8:return e.next=10,I(n);case 10:return t=e.sent,e.next=13,w();case 13:P({key:t.id});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(n);case 2:return e.next=4,w();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var n=e.key;b(n);var t=F.find((function(e){return e.id===n}));T.resetFields(),T.setFieldsValue(t),C("\u4fee\u6539\u83dc\u5355"),J.resetFields(),J.setFieldsValue({menuId:n,actions:[]})}var S=Object(j.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.id,a=n.icon,i=n.title,s=n.children;return s&&s.length?Object(E.jsx)(o.a.SubMenu,{title:i,icon:a,onTitleClick:P,children:e(s)},t):Object(E.jsx)(o.a.Item,{icon:a,children:i},t)}))}(Object(g.b)(F))}),[F]);Object(j.useEffect)((function(){Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:case"end":return e.stop()}}),e)})))()}),[]);var Q={labelCol:{flex:"90px"}};return Object(E.jsxs)(O.a,{fitHeight:!0,className:y.a.root,children:[Object(E.jsxs)("div",{className:y.a.menu,children:[Object(E.jsxs)(s.b,{className:y.a.menuTop,children:[Object(E.jsx)(c.a,{type:"primary",onClick:function(){T.resetFields(),C("\u6dfb\u52a0\u9876\u7ea7"),J.setFieldsValue({menuId:void 0,actions:[]})},children:"\u6dfb\u52a0\u9876\u7ea7"}),Object(E.jsx)(c.a,{disabled:!r,onClick:function(){T.resetFields(),T.setFieldsValue({parentId:r}),C("\u6dfb\u52a0\u5b50\u7ea7"),J.setFieldsValue({menuId:void 0,actions:[]})},children:"\u6dfb\u52a0\u5b50\u7ea7"})]}),Object(E.jsx)("div",{className:y.a.menuContent,children:Object(E.jsx)(o.a,{mode:"inline",selectable:!0,selectedKeys:[r],onClick:P,children:S})})]}),Object(E.jsxs)("div",{className:y.a.edit,children:[Object(E.jsx)("h2",{children:h}),Object(E.jsxs)(u.a,{form:T,onFinish:function(e){return N.apply(this,arguments)},children:[Object(E.jsx)(v.a,{name:"parentId",hidden:!0}),Object(E.jsx)(v.a,{name:"id",hidden:!0}),Object(E.jsx)(v.a,Object(i.a)(Object(i.a)({},Q),{},{label:"\u6807\u9898",name:"title",required:!0,tooltip:"\u83dc\u5355\u6807\u9898"})),Object(E.jsx)(v.a,Object(i.a)(Object(i.a)({},Q),{},{label:"\u57fa\u7840\u8def\u5f84",name:"basePath",tooltip:"\u6240\u6709\u5b50\u83dc\u5355\u5c06\u4ee5\u6b64\u8def\u5f84\u4e3a\u524d\u7f00"})),Object(E.jsx)(v.a,Object(i.a)(Object(i.a)({},Q),{},{label:"\u8def\u5f84",name:"path",tooltip:"\u83dc\u5355\u8def\u5f84\uff0c\u5982\u679c\u7b2c\u4e09\u65b9\u7f51\u7ad9\uff0c\u8bf7\u6307\u5b9a\u76ee\u6807"})),Object(E.jsx)(v.a,Object(i.a)(Object(i.a)({},Q),{},{label:"\u76ee\u6807",type:"radio-button",name:"target",initialValue:"",options:[{value:"",label:"\u65e0"},{value:"iframe",label:"\u5185\u5d4c"},{value:"_self",label:"\u5f53\u524d\u7a97\u53e3"},{value:"_blank",label:"\u65b0\u5f00\u7a97\u53e3"}],tooltip:"\u6307\u5b9a\u76ee\u6807\u4e4b\u540e\uff0c\u5c06\u4ee5\u7b2c\u4e09\u65b9\u7f51\u7ad9\u65b9\u5f0f\u6253\u5f00"})),Object(E.jsx)(v.a,Object(i.a)(Object(i.a)({},Q),{},{type:"number",label:"\u6392\u5e8f",name:"order",tooltip:"\u8d8a\u5927\u8d8a\u9760\u524d"})),Object(E.jsx)(v.a,{children:Object(E.jsx)(s.b,{style:{paddingLeft:Q.labelCol.flex},children:Object(E.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})})})]})]}),Object(E.jsxs)("div",{className:y.a.action,children:[Object(E.jsx)("h2",{children:"\u529f\u80fd\u5217\u8868"}),Object(E.jsxs)(u.a,{form:J,onFinish:function(e){return V.apply(this,arguments)},children:[Object(E.jsx)(v.a,{name:"menuId",hidden:!0}),Object(E.jsx)(v.a,{shouldUpdate:!0,noStyle:!0,children:function(e){return(0,e.getFieldValue)("menuId")?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(u.a.List,{name:"actions",children:function(e,n){var t=n.add,a=n.remove;return Object(E.jsxs)(E.Fragment,{children:[e.map((function(e){var n=e.key,t=e.name;return Object(E.jsxs)(s.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(E.jsx)(v.a,{hidden:!0,name:[t,"id"]}),Object(E.jsx)(v.a,{name:[t,"title"],placeholder:"\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}]}),Object(E.jsx)(v.a,{name:[t,"code"],placeholder:"\u7f16\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f16\u7801\uff01"}]}),Object(E.jsx)(m,{style:{color:"red"},onClick:function(){return a(t)}})]},n)})),Object(E.jsx)(v.a,{children:Object(E.jsx)(c.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(E.jsx)(f.a,{}),children:"\u65b0\u589e\u7f16\u7801"})})]})}}),Object(E.jsx)(s.b,{style:{display:"flex",justifyContent:"center"},children:Object(E.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u4fdd\u5b58"})})]}):Object(E.jsx)(a.a,{style:{marginTop:100},description:"\u8bf7\u9009\u62e9\u6216\u4fdd\u5b58\u65b0\u589e\u83dc\u5355"})}})]})]})]})}))},590:function(e,n,t){var a=t(103),i=t(591);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var s={insert:"head",singleton:!1};a(i,s);e.exports=i.locals||{}},591:function(e,n,t){"use strict";t.r(n);var a=t(63),i=t.n(a)()(!0);i.push([e.i,".root_1lXHi {\n  display: flex;\n}\n.menu_ERmcs {\n  flex: 0 0 210px;\n  display: flex;\n  flex-direction: column;\n}\n.menu_ERmcs .menuTop_17CH7 {\n  flex: 0 0 50px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #e8e8e8;\n}\n.menu_ERmcs .menuContent_ko9de {\n  flex: 1;\n  overflow: auto;\n}\n.edit_2vHXt {\n  flex: 1;\n  overflow: auto;\n  padding: 0 32px;\n  border-left: 1px solid #e8e8e8;\n  border-right: 1px solid #e8e8e8;\n}\n.edit_2vHXt h2 {\n  text-align: center;\n  padding: 8px;\n}\n.action_12t5u {\n  flex: 1;\n  overflow: auto;\n  padding: 0 32px;\n}\n.action_12t5u h2 {\n  text-align: center;\n  padding: 8px;\n}\n","",{version:3,sources:["webpack://src/pages/menus/style.less"],names:[],mappings:"AAAA;EACI,aAAA;AACJ;AAGA;EACI,eAAA;EACA,aAAA;EACA,sBAAA;AADJ;AAFA;EAMQ,cAAA;EACA,aAAA;EACA,mBAAA;EACA,gCAAA;AADR;AARA;EAaQ,OAAA;EACA,cAAA;AAFR;AAMA;EACI,OAAA;EACA,cAAA;EACA,eAAA;EACA,8BAAA;EACA,+BAAA;AAJJ;AADA;EAQQ,kBAAA;EACA,YAAA;AAJR;AASA;EACI,OAAA;EACA,cAAA;EACA,eAAA;AAPJ;AAIA;EAMQ,kBAAA;EACA,YAAA;AAPR",sourcesContent:[".root {\n    display: flex;\n\n}\n\n.menu {\n    flex: 0 0 210px;\n    display: flex;\n    flex-direction: column;\n\n    .menuTop {\n        flex: 0 0 50px;\n        display: flex;\n        align-items: center;\n        border-bottom: 1px solid #e8e8e8;\n    }\n\n    .menuContent {\n        flex: 1;\n        overflow: auto;\n    }\n}\n\n.edit {\n    flex: 1;\n    overflow: auto;\n    padding: 0 32px;\n    border-left: 1px solid #e8e8e8;\n    border-right: 1px solid #e8e8e8;\n\n    h2 {\n        text-align: center;\n        padding: 8px;\n    }\n\n}\n\n.action {\n    flex: 1;\n    overflow: auto;\n    padding: 0 32px;\n\n    h2 {\n        text-align: center;\n        padding: 8px;\n    }\n}\n"],sourceRoot:""}]),i.locals={root:"root_1lXHi",menu:"menu_ERmcs",menuTop:"menuTop_17CH7",menuContent:"menuContent_ko9de",edit:"edit_2vHXt",action:"action_12t5u"},n.default=i}}]);
//# sourceMappingURL=16.161d1dde.chunk.js.map