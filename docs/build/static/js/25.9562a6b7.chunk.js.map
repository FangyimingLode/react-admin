{"version":3,"sources":["pages/layout-setting/index.jsx"],"names":["options","value","label","themeOptions","config","path","title","props","useState","code","setCode","layout","labelCol","flex","fitHeight","style","display","flexDirection","marginBottom","type","message","color","initialValues","CONFIG_HOC","onValuesChange","changedValues","values","storage","local","setItem","CONFIG_HOC_STORAGE_KEY","Object","entries","forEach","key","layoutRef","current","refresh","json5","stringify","setTimeout","resizeEvent","Event","window","dispatchEvent","name","LAYOUT_TYPE","SIDE_MENU","TOP_MENU","TOP_SIDE_MENU","span","shouldUpdate","noStyle","getFieldValue","overflow","borderTop","padding","background"],"mappings":"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","file":"static/js/25.9562a6b7.chunk.js","sourcesContent":["import {useState} from 'react';\nimport {Form, Row, Col, Alert} from 'antd';\nimport {FormItem, LAYOUT_TYPE, PageContent} from '@ra-lib/components';\nimport json5 from 'json5';\nimport {storage} from 'src/commons';\nimport {CONFIG_HOC_STORAGE_KEY, CONFIG_HOC} from 'src/config';\nimport config from 'src/commons/config-hoc';\nimport {layoutRef} from 'src/components/layout';\n\nconst options = [\n    {value: true, label: '是'},\n    {value: false, label: '否'},\n];\n\nconst themeOptions = [\n    {value: 'default', label: '亮'},\n    {value: 'dark', label: '暗'},\n];\n\nexport default config({\n    path: '/layout/setting',\n    title: '布局设置',\n})(function LayoutSetting(props) {\n\n    const [code, setCode] = useState('');\n\n    function handleChange(changedValues, values) {\n        storage.local.setItem(CONFIG_HOC_STORAGE_KEY, values);\n\n        Object.entries(values)\n            .forEach(([key, value]) => CONFIG_HOC[key] = value);\n\n        layoutRef.current?.refresh && layoutRef.current.refresh();\n        setCode(json5.stringify(values, null, 4));\n\n        // 延迟触发window 的 resize事件调整布局\n        setTimeout(() => {\n            const resizeEvent = new Event('resize');\n            window.dispatchEvent(resizeEvent);\n        });\n    }\n\n    const layout = {\n        labelCol: {flex: '100px'},\n    };\n\n    return (\n        <PageContent fitHeight style={{display: 'flex', flexDirection: 'column'}}>\n            <div style={{flex: 0}}>\n                <Alert\n                    style={{marginBottom: 24}}\n                    type=\"warning\"\n                    message={\n                        <div style={{color: 'red'}}>\n                            不推荐将设置开放给用户，选择好了之后，复制代码到项目配置文件 src/config/index.js 中\n                        </div>\n                    }\n                />\n                <Form\n                    initialValues={CONFIG_HOC}\n                    onValuesChange={handleChange}\n                >\n                    <FormItem\n                        {...layout}\n                        type=\"radio-button\"\n                        label=\"布局方式\"\n                        name=\"layoutType\"\n                        options={[\n                            {value: LAYOUT_TYPE.SIDE_MENU, label: '左侧菜单'},\n                            {value: LAYOUT_TYPE.TOP_MENU, label: '头部菜单'},\n                            {value: LAYOUT_TYPE.TOP_SIDE_MENU, label: '头部 + 左侧菜单'},\n                        ]}\n                    />\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"左侧\"\n                                name=\"side\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const side = getFieldValue('side');\n                                if (!side) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"菜单保持打开\"\n                                                name=\"keepMenuOpen\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"左侧主题\"\n                                                name=\"sideTheme\"\n                                                options={themeOptions}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"菜单搜索\"\n                                                name=\"searchMenu\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"头部\"\n                                name=\"header\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const header = getFieldValue('header');\n                                if (!header) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"头部收起菜单\"\n                                                name=\"headerSideToggle\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"头部主题\"\n                                                name=\"headerTheme\"\n                                                options={themeOptions}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <Row>\n                        <Col span={6}>\n                            <FormItem\n                                {...layout}\n                                type=\"radio-button\"\n                                label=\"Tab页\"\n                                name=\"tab\"\n                                options={options}\n                            />\n                        </Col>\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const tab = getFieldValue('tab');\n                                if (!tab) return null;\n                                return (\n                                    <>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab持久化\"\n                                                name=\"persistTab\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab收起菜单\"\n                                                name=\"tabSideToggle\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                        <Col span={6}>\n                                            <FormItem\n                                                {...layout}\n                                                type=\"radio-button\"\n                                                label=\"Tab额外头部\"\n                                                name=\"tabHeaderExtra\"\n                                                options={options}\n                                            />\n                                        </Col>\n                                    </>\n                                );\n                            }}\n                        </FormItem>\n                    </Row>\n                    <FormItem\n                        {...layout}\n                        type=\"radio-button\"\n                        label=\"页面头部\"\n                        name=\"pageHeader\"\n                        options={options}\n                    />\n                </Form>\n            </div>\n            <code style={{\n                flex: 1,\n                overflow: 'auto',\n                borderTop: '1px solid #e8e8e8',\n                padding: 16,\n                background: '#000',\n            }}>\n                <pre style={{color: '#fff'}}>\n                    {code}\n                </pre>\n            </code>\n        </PageContent>\n    );\n});\n"],"sourceRoot":""}