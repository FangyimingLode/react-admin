{"version":3,"sources":["pages/local/scroll.jsx"],"names":["config","path","props","useState","dataSource","page","setPage","loading","setLoading","useEffect","console","log","setTimeout","loadMore","window","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","addEventListener","removeEventListener","map","item","index","style","height","margin","border"],"mappings":"yJAGeA,sBAAO,CAClBC,KAAM,WADKD,EAEZ,SAAgBE,GAAQ,IAAD,EACDC,mBAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAA7CC,EADe,sBAEED,mBAAS,GAFX,mBAEfE,EAFe,KAETC,EAFS,OAGQH,oBAAS,GAHjB,mBAGfI,EAHe,KAGNC,EAHM,KAiCtB,OA5BAC,qBAAU,WACNC,QAAQC,IAAI,cAAeN,GAC3BG,GAAW,GACXI,YAAW,WACPF,QAAQC,IAAI,wCACZH,GAAW,KACZ,OAEJ,CAACH,IAEJI,qBAAU,WACN,IAAMI,EAAW,WACCC,OAAOC,YACHC,SAASC,gBAAgBC,WACtBF,SAASG,iBAAiBC,eAELb,GACtCD,GAAQ,SAAAD,GAAI,OAAIA,EAAO,MAK/B,OADAS,OAAOO,iBAAiB,SAAUR,GAC3B,WACHC,OAAOQ,oBAAoB,SAAUT,MAE1C,CAACN,IAIA,8BAEKH,EAAWmB,KAAI,SAACC,EAAMC,GAEnB,OAAQ,qBAAiBC,MAAO,CAACC,OAAQ,IAAKC,OAAQ,EAAGC,OAAQ,qBAAzD,SAAgFJ,GAAtEA","file":"static/js/28.c36c4b61.chunk.js","sourcesContent":["import {useEffect, useState} from 'react';\nimport config from 'src/commons/config-hoc';\n\nexport default config({\n    path: '/scroll',\n})(function Scroll(props) {\n    const [dataSource] = useState([1, 2, 3, 4, 5, 6, 7, 8]);\n    const [page, setPage] = useState(0);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        console.log('page effect', page);\n        setLoading(true);\n        setTimeout(() => {\n            console.log('数据加载完成');\n            setLoading(false);\n        }, 2000);\n\n    }, [page]);\n\n    useEffect(() => {\n        const loadMore = () => {\n            const viewH = window.innerHeight;\n            const scrollTop = document.documentElement.scrollTop;\n            const scrollHeight = document.scrollingElement.scrollHeight;\n\n            if (viewH + scrollTop >= scrollHeight && !loading) {\n                setPage(page => page + 1);\n            }\n        };\n\n        window.addEventListener('scroll', loadMore);\n        return () => {\n            window.removeEventListener('scroll', loadMore);\n        };\n    }, [loading]);\n\n\n    return (\n        <div>\n\n            {dataSource.map((item, index) => {\n\n                return (<div key={index} style={{height: 200, margin: 8, border: '1px solid #e8e8e8'}}>{index}</div>);\n            })}\n        </div>\n    );\n});\n"],"sourceRoot":""}